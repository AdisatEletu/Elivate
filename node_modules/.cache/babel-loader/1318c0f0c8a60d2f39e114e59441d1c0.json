{"ast":null,"code":"var _jsxFileName = \"/Users/softcom/Documents/Elivate/src/components/forms/otp/OtpInput.js\";\nimport React, { useRef, useState } from \"react\";\nimport './otp.css';\nexport const OtpInput = ({\n  length,\n  label,\n  loading,\n  onComplete\n}) => {\n  const [code, setCode] = useState([...Array(length)].map(() => \"\"));\n  const inputs = useRef([]);\n\n  const controlInput = (e, slot) => {\n    const num = e.target.value;\n    if (/[^0-9]/.test(num)) return;\n    const newCode = [...code];\n    newCode[slot] = num;\n    setCode(newCode);\n\n    if (slot !== length - 1) {\n      inputs.current[slot + 1].focus();\n    }\n\n    if (newCode.every(num => num !== \"\")) {\n      onComplete(newCode.join(\"\"));\n    }\n  };\n\n  const handleKeyUp = (e, slot) => {\n    if (e.keyCode === 8 && !code[slot] && slot !== 0) {\n      const newCode = [...code];\n      newCode[slot - 1] = \"\";\n      setCode(newCode);\n      inputs.current[slot - 1].focus();\n    }\n  };\n\n  console.log({\n    code\n  });\n  return /*#__PURE__*/React.createElement(React.Fragment, null, code.map((num, i) => {\n    return /*#__PURE__*/React.createElement(\"input\", {\n      className: 'otp-input',\n      value: num,\n      autoFocus: !code[0].length && i === 0,\n      readOnly: loading,\n      onChange: e => controlInput(e, i),\n      key: i,\n      onKeyUp: e => handleKeyUp(e, i),\n      ref: ref => inputs.current.push(ref),\n      maxLength: 1,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 16\n      }\n    });\n  }));\n};","map":{"version":3,"sources":["/Users/softcom/Documents/Elivate/src/components/forms/otp/OtpInput.js"],"names":["React","useRef","useState","OtpInput","length","label","loading","onComplete","code","setCode","Array","map","inputs","controlInput","e","slot","num","target","value","test","newCode","current","focus","every","join","handleKeyUp","keyCode","console","log","i","ref","push"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,MAAf,EAAuBC,QAAvB,QAAsC,OAAtC;AACA,OAAO,WAAP;AAEA,OAAO,MAAMC,QAAQ,GAAG,CAAC;AAAEC,EAAAA,MAAF;AAAUC,EAAAA,KAAV;AAAiBC,EAAAA,OAAjB;AAA0BC,EAAAA;AAA1B,CAAD,KAA2C;AACjE,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBP,QAAQ,CAAC,CAAC,GAAGQ,KAAK,CAACN,MAAD,CAAT,EAAmBO,GAAnB,CAAuB,MAAM,EAA7B,CAAD,CAAhC;AACA,QAAMC,MAAM,GAAGX,MAAM,CAAC,EAAD,CAArB;;AAEA,QAAMY,YAAY,GAAG,CAACC,CAAD,EAAIC,IAAJ,KAAY;AAC/B,UAAMC,GAAG,GAAGF,CAAC,CAACG,MAAF,CAASC,KAArB;AACA,QAAI,SAASC,IAAT,CAAcH,GAAd,CAAJ,EAAwB;AACxB,UAAMI,OAAO,GAAG,CAAC,GAAGZ,IAAJ,CAAhB;AACAY,IAAAA,OAAO,CAACL,IAAD,CAAP,GAAgBC,GAAhB;AACAP,IAAAA,OAAO,CAACW,OAAD,CAAP;;AACA,QAAIL,IAAI,KAAKX,MAAM,GAAG,CAAtB,EAAyB;AACvBQ,MAAAA,MAAM,CAACS,OAAP,CAAeN,IAAI,GAAG,CAAtB,EAAyBO,KAAzB;AACD;;AACD,QAAIF,OAAO,CAACG,KAAR,CAAcP,GAAG,IAAIA,GAAG,KAAK,EAA7B,CAAJ,EAAsC;AACpCT,MAAAA,UAAU,CAACa,OAAO,CAACI,IAAR,CAAa,EAAb,CAAD,CAAV;AACD;AACF,GAZD;;AAeA,QAAMC,WAAW,GAAG,CAACX,CAAD,EAAIC,IAAJ,KAAY;AAC9B,QAAGD,CAAC,CAACY,OAAF,KAAc,CAAd,IAAmB,CAAClB,IAAI,CAACO,IAAD,CAAxB,IAAkCA,IAAI,KAAK,CAA9C,EAAgD;AAC9C,YAAMK,OAAO,GAAG,CAAC,GAAGZ,IAAJ,CAAhB;AACAY,MAAAA,OAAO,CAACL,IAAI,GAAG,CAAR,CAAP,GAAoB,EAApB;AACAN,MAAAA,OAAO,CAACW,OAAD,CAAP;AACAR,MAAAA,MAAM,CAACS,OAAP,CAAeN,IAAI,GAAG,CAAtB,EAAyBO,KAAzB;AACD;AACF,GAPD;;AASAK,EAAAA,OAAO,CAACC,GAAR,CAAY;AAACpB,IAAAA;AAAD,GAAZ;AAEA,sBACE,0CACGA,IAAI,CAACG,GAAL,CAAS,CAACK,GAAD,EAAMa,CAAN,KAAU;AAClB,wBAAO;AAAO,MAAA,SAAS,EAAE,WAAlB;AAA+B,MAAA,KAAK,EAAEb,GAAtC;AAA2C,MAAA,SAAS,EAAE,CAACR,IAAI,CAAC,CAAD,CAAJ,CAAQJ,MAAT,IAAmByB,CAAC,KAAK,CAA/E;AAAkF,MAAA,QAAQ,EAAEvB,OAA5F;AACO,MAAA,QAAQ,EAAEQ,CAAC,IAAID,YAAY,CAACC,CAAD,EAAIe,CAAJ,CADlC;AAEO,MAAA,GAAG,EAAEA,CAFZ;AAGO,MAAA,OAAO,EAAEf,CAAC,IAAIW,WAAW,CAACX,CAAD,EAAIe,CAAJ,CAHhC;AAIO,MAAA,GAAG,EAAEC,GAAG,IAAIlB,MAAM,CAACS,OAAP,CAAeU,IAAf,CAAoBD,GAApB,CAJnB;AAKO,MAAA,SAAS,EAAE,CALlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP;AAMD,GAPA,CADH,CADF;AAYD,CA1CM","sourcesContent":["import React, {useRef, useState} from \"react\";\nimport './otp.css'\n\nexport const OtpInput = ({ length, label, loading, onComplete }) =>{\n  const [code, setCode] = useState([...Array(length)].map(() => \"\"));\n  const inputs = useRef([]);\n  \n  const controlInput = (e, slot) =>{\n    const num = e.target.value;\n    if (/[^0-9]/.test(num)) return;\n    const newCode = [...code];\n    newCode[slot] = num;\n    setCode(newCode);\n    if (slot !== length - 1) {\n      inputs.current[slot + 1].focus();\n    }\n    if (newCode.every(num => num !== \"\")) {\n      onComplete(newCode.join(\"\"));\n    }\n  };\n  \n  \n  const handleKeyUp = (e, slot) =>{\n    if(e.keyCode === 8 && !code[slot] && slot !== 0){\n      const newCode = [...code];\n      newCode[slot - 1] = \"\";\n      setCode(newCode);\n      inputs.current[slot - 1].focus();\n    }\n  };\n  \n  console.log({code});\n  \n  return(\n    <>\n      {code.map((num, i)=>{\n        return <input className={'otp-input'} value={num} autoFocus={!code[0].length && i === 0} readOnly={loading}\n                      onChange={e => controlInput(e, i)}\n                      key={i}\n                      onKeyUp={e => handleKeyUp(e, i)}\n                      ref={ref => inputs.current.push(ref)}\n                      maxLength={1}/>\n      })}\n    </>\n  )\n};"]},"metadata":{},"sourceType":"module"}